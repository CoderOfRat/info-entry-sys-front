(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46840fb4"],{a55b:function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"login_content"}},[t("span",{staticClass:"sys_info"},[e._v("© "+e._s((new Date).getFullYear())+" - author "),t("el-link",{attrs:{type:"primary",href:"https://github.com/Crelle",target:"_blank"}},[e._v("crell")]),e._v(" & "),t("el-link",{attrs:{type:"primary",href:"https://github.com/CoderOfRat",target:"_blank"}},[e._v("CoderOfRat")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.ifLogin,expression:"ifLogin"}],staticClass:"login_form_main"},[t("span",[e._v("家庭百科系统登录")]),t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"20px",size:"mini"}},[t("el-form-item",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{type:"text"},on:{click:e.goRegister}},[e._v("还没有账号？注册一个")])],1),t("el-form-item",{attrs:{label:"",prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}},[t("i",{staticClass:"el-icon-user",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码","show-password":""},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}},[t("i",{staticClass:"el-icon-lock",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"code"}},[t("el-input",{attrs:{maxlength:"4",placeholder:"验证码"},on:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.submitForm("ruleForm")}},model:{value:e.ruleForm.code,callback:function(r){e.$set(e.ruleForm,"code",r)},expression:"ruleForm.code"}},[t("i",{staticClass:"el-iconfont-yanzhengma",attrs:{slot:"prepend"},slot:"prepend"}),t("el-image",{staticStyle:{width:"80px",height:"26px",display:"block"},attrs:{slot:"append",src:e.codeurl,fit:"fill"},on:{click:e.changecode},slot:"append"})],1)],1),t("el-form-item",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("登录")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("忘记密码？")])],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.ifLogin,expression:"!ifLogin"}],staticClass:"register_form_main"},[t("span",[e._v("账号注册")]),t("el-row",{staticStyle:{height:"100%"}},[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content-left"},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.baseURL+"/user/uploadAvatar",data:e.fileType,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl,draggable:"false"}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("span",{staticStyle:{"font-size":"small",color:"red"}},[e._v("* 请上传头像或选择默认头像")]),t("el-scrollbar",{staticStyle:{height:"90px",width:"200px"}},[t("div",{staticClass:"demo-image__lazy",style:"width: "+88*e.defaultImgs.length+"px"},e._l(e.defaultImgs,(function(r,s){return t("div",{key:s,staticStyle:{display:"inline-block"},on:{click:function(t){return e.choosedefaultImg(s,r)}}},[t("el-image",{class:e.nowIndex===s?"default_img_chioce":"",attrs:{src:r,draggable:"false"}})],1)})),0)])],1)]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content-right"},[t("el-form",{ref:"registerRuleForm",attrs:{model:e.registerRuleForm,rules:e.registeRules,"label-width":"20px",size:"mini"}},[t("el-form-item",{attrs:{label:"",prop:"username"}},[t("el-input",{attrs:{placeholder:"用户名"},model:{value:e.registerRuleForm.username,callback:function(r){e.$set(e.registerRuleForm,"username",r)},expression:"registerRuleForm.username"}},[t("i",{staticClass:"el-icon-user",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"userNickName"}},[t("el-input",{attrs:{type:"text",placeholder:"昵称"},model:{value:e.registerRuleForm.userNickName,callback:function(r){e.$set(e.registerRuleForm,"userNickName",r)},expression:"registerRuleForm.userNickName"}},[t("i",{staticClass:"el-icon-magic-stick",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"userPhone"}},[t("el-input",{attrs:{type:"tel",placeholder:"手机号"},model:{value:e.registerRuleForm.userPhone,callback:function(r){e.$set(e.registerRuleForm,"userPhone",r)},expression:"registerRuleForm.userPhone"}},[t("i",{staticClass:"el-icon-mobile-phone",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"userEmail"}},[t("el-input",{attrs:{type:"email",placeholder:"邮箱"},model:{value:e.registerRuleForm.userEmail,callback:function(r){e.$set(e.registerRuleForm,"userEmail",r)},expression:"registerRuleForm.userEmail"}},[t("i",{staticClass:"el-icon-message",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码","show-password":""},model:{value:e.registerRuleForm.password,callback:function(r){e.$set(e.registerRuleForm,"password",r)},expression:"registerRuleForm.password"}},[t("i",{staticClass:"el-icon-lock",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{attrs:{label:"",prop:"confirmPwd"}},[t("el-input",{attrs:{type:"password","show-password":"",placeholder:"确认密码"},model:{value:e.registerRuleForm.confirmPwd,callback:function(r){e.$set(e.registerRuleForm,"confirmPwd",r)},expression:"registerRuleForm.confirmPwd"}},[t("i",{staticClass:"el-iconfont-querenmima",attrs:{slot:"prepend"},slot:"prepend"})])],1),t("el-form-item",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.resetForm("registerRuleForm")}}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.register}},[e._v("确认")]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:e.backLogin}},[e._v("已有账号")])],1)],1)],1)])],1)],1)])},i=[],a=t("5530"),l=(t("2b3d"),t("d3b7"),t("3ca3"),t("ddb0"),t("7555")),o=t("b1f7"),n=t("da71"),c={data:function(){return{ifLogin:!0,fileType:{fileType:0},ruleForm:{username:"",password:"",code:""},registerRuleForm:{username:"",password:"",confirmPwd:"",userEmail:"",userNickName:"",userPhone:"",userAvatar:""},imageUrl:"",nowIndex:-1,defaultImgs:["http://1.116.79.69:80/fes/picture/2021-4-27-e9a33f87-ab85-464a-a4b4-5fcd196eea51.png","http://1.116.79.69:80/fes/picture/2021-4-27-5da50eea-9146-40e5-836c-42ee5eb29092.png","http://1.116.79.69:80/fes/picture/2021-4-27-137171c6-5a54-4025-8e84-877cbab6c355.png","http://1.116.79.69:80/fes/picture/2021-4-27-d9b3fe51-6e70-4ffa-970d-2d517a7bdc7a.png","http://1.116.79.69:80/fes/picture/2021-4-27-a16b1069-2665-4f4a-85b5-c9607f65a00a.png","http://1.116.79.69:80/fes/picture/2021-4-27-90c64b39-d069-4644-8bef-3dc4e3e5ab55.png","http://1.116.79.69:80/fes/picture/2021-4-27-905ea61e-dac4-472f-bce5-24a9bcedac66.png","http://1.116.79.69:80/fes/picture/2021-4-27-8c5ba8c3-bcfc-4d8b-9bac-6566d53d5173.png"],baseURL:n["a"],rules:{username:[{required:!0,message:"请输入用户名",trigger:["blur","change"]},{min:3,max:10,message:"用户名长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:["blur","change"]},{min:5,max:16,message:"密码长度在 6 到 16 位之间",trigger:"blur"}],code:[{required:!0,message:"请填写验证码",trigger:["blur","change"]}]},registeRules:{username:[{required:!0,message:"请输入用户名",trigger:["blur","change"]},{min:3,max:10,message:"用户名长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请填写密码",trigger:["blur","change"]},{min:5,max:16,message:"密码长度在 6 到 16 位之间",trigger:"blur"}],confirmPwd:[{required:!0,message:"请确认密码",trigger:["blur","change"]},{min:5,max:16,message:"密码长度在 6 到 16 位之间",trigger:"blur"}],userEmail:[{required:!0,message:"请填写邮箱",trigger:["blur","change"]}],userNickName:[{required:!0,message:"请填写昵称",trigger:["blur","change"]}],userPhone:[{required:!0,message:"请填写手机号码",trigger:["blur","change"]}]},codeurl:""}},created:function(){this.changecode()},mounted:function(){},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return!1;var t=Object(a["a"])({},r.ruleForm);Object(l["b"])(t).then((function(e){if(e&&e.code&&"00000"===e.code){var t=Object(o["b"])(JSON.stringify(e.data));window.localStorage.setItem("userdetail",t),r.$router.push("/sys/firstscreen")}else r.$message.warning(e.message?e.message:"请确保输入信息正确")}))}))},resetForm:function(e){this.$refs[e].resetFields()},changecode:function(){var e=this;Object(l["a"])().then((function(r){var t=new Blob([r],{type:"image/jpeg"}),s=Date.parse(new Date)+".jpeg";if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,s);else{var i=window.URL.createObjectURL(t);e.codeurl=i}}))},goRegister:function(){this.ifLogin=!1},register:function(){var e=this;this.$refs["registerRuleForm"].validate((function(r){return!!r&&(e.registerRuleForm.password!==e.registerRuleForm.confirmPwd?e.$message.error("两次输入的密码不一致"):e.imageUrl?(e.registerRuleForm.userAvatar=e.imageUrl,void Object(l["d"])(e.registerRuleForm).then((function(r){r&&r.code&&"00000"===r.code&&(e.resetForm("registerRuleForm"),e.imageUrl="",e.nowIndex=-1,e.$message.success("恭喜您，注册成功！"),e.ifLogin=!0)}))):e.$message.error("请上传头像或选择默认头像"))}))},backLogin:function(){this.ifLogin=!0,this.imageUrl="",this.nowIndex=-1,this.resetForm("registerRuleForm")},handleAvatarSuccess:function(e,r){this.imageUrl=URL.createObjectURL(r.raw),this.nowIndex=-1,console.log(this.imageUrl)},beforeAvatarUpload:function(e){if(console.log(e.type),/^image\/+?/.test(e.type))this.fileType.fileType=0;else if(/^video\/+?/.test(e.type))this.fileType.fileType=1;else if(/^audio\/+?/.test(e.type))this.fileType.fileType=2;else{if(!/^application\/vnd.ms-+?/.test(e.type))return this.$message.error("此文件类型不支持!"),!1;this.fileType.fileType=3}var r=e.size/1024/1024<100;return r||this.$message.error("上传头像图片大小不能超过 100MB!"),r},choosedefaultImg:function(e,r){e!==this.nowIndex?(console.log(this.nowIndex),this.nowIndex=e,this.imageUrl=r):(console.log(this.nowIndex,-1),this.nowIndex=-1,this.imageUrl="")}}},u=c,m=(t("b739"),t("2877")),p=Object(m["a"])(u,s,i,!1,null,"31451a7a",null);r["default"]=p.exports},aff2:function(e,r,t){},b739:function(e,r,t){"use strict";t("aff2")}}]);